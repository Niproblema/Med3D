<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div style="margin-bottom: 10px">
    <b>Select MHD file:</b>  <input type="file" id="mhdFile"><br>
</div>
<div style="margin-bottom: 10px">
    <b>Select RAW file</b>: <input type="file" id="rawFile"> <br>
</div>

<div style="margin-bottom: 10px">
    <button onclick="uploadFile()" style="margin-bottom: 10px">Upload</button> <b><span style="color: darkred" id="warning"></span></b>
</div>
<!-- Specified files are not in the correct format! -->

<script src="../src/Med3D.js"></script>
<script src="../src/marching_cubes/MHDReader.js"></script>
<script>

    uploadFile = function() {
        var mhd = document.getElementById("mhdFile");
        var raw = document.getElementById("rawFile");

        // Validate input
        if (mhd.files.length < 1 || raw.files.length < 1) {
            document.getElementById("warning").innerHTML = "Please select both mhd and raw file.";
        }

        var mhdFile = mhd.files[0];
        var rawFile = raw.files[0];

        var splittedMhdName = mhdFile.name.split(".");
        var splittedRawName = rawFile.name.split(".");

        if (splittedMhdName[splittedMhdName.length - 1] !== "mhd") {
            document.getElementById("warning").innerHTML = "Invalid MHD file.";
        }
        else if (splittedRawName[splittedRawName.length - 1] !== "raw") {
            document.getElementById("warning").innerHTML = "Invalid RAW file.";
        }

        var reader = new M3D.MHDReader(function(rez) {
            console.log(rez.data.byteLength);
            var test = rez;
        });



        reader.fileLoad(mhdFile, rawFile);
    }

</script>

</body>
</html>